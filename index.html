<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<title>Triolingo 2.0</title>
<style>
body { font-family: Arial; background:#eef2f7; text-align:center; margin:0; padding:0;}
header { background:#4a90e2; color:white; padding:20px;}
button {padding:10px 20px; margin:5px; font-size:16px; cursor:pointer; border:none; border-radius:5px; transition:0.2s;}
button:hover{opacity:0.8;}
#gameBoard{display:grid; grid-template-columns:repeat(4,120px); gap:10px; justify-content:center; margin:20px 0;}
.card,.flashcard{width:100px;height:100px;background:#2c3e50;color:white; display:flex; align-items:center; justify-content:center; font-size:16px; cursor:pointer; border-radius:8px; user-select:none;}
.card.flipped{background:#3498db;}
#usernameScreen,#languageScreen,#methodScreen,#gameScreen,#leaderboardScreen{display:none; margin-top:30px;}
#pointsDisplay{margin:10px; font-weight:bold;}
#rankDisplay{margin:5px;}
</style>
</head>
<body>
<header>
<h1>üåç Triolingo 2.0</h1>
<div id="pointsDisplay"></div>
<div id="rankDisplay"></div>
</header>

<!-- Benutzername -->
<div id="usernameScreen">
<h2>Gib deinen Benutzernamen ein</h2>
<input type="text" id="usernameInput" placeholder="Benutzername">
<br>
<button onclick="setUsername()">Starten</button>
</div>

<!-- Sprache w√§hlen -->
<div id="languageScreen">
<h2>W√§hle eine Sprache</h2>
<button onclick="selectLanguage('englisch')">Englisch</button>
<button onclick="selectLanguage('russisch')">Russisch</button>
<button onclick="selectLanguage('kurdisch')">Kurdisch</button>
</div>

<!-- Lernmethode -->
<div id="methodScreen">
<h2>W√§hle Lernmethode</h2>
<button onclick="startGame('memory')">Memory</button>
<button onclick="startGame('flashcards')">Karteikarten</button>
<button onclick="startGame('normal')">W√∂rter lernen</button>
</div>

<!-- Spielbereich -->
<div id="gameScreen">
<h2 id="methodTitle"></h2>
<div id="gameBoard"></div>
<button onclick="goToMethods()">Zur√ºck zu Methoden</button>
<button onclick="showLeaderboard()">Rangliste</button>
</div>

<!-- Rangliste -->
<div id="leaderboardScreen">
<h2>Top 10 Spieler</h2>
<ol id="leaderboardList"></ol>
<button onclick="goToLanguage()">Zur√ºck zur Sprache</button>
</div>

<script>
// --- Variablen ---
let username = '', language = '', method = '', points = 0;
const rankThresholds = [
{name:'Anf√§nger', points:0},
{name:'Fortgeschritten', points:100},
{name:'Experte', points:250},
{name:'Meister', points:500}
];

// --- Beispielhafte Alltagsw√∂rter (50 W√∂rter pro Sprache) ---
const words = {
englisch:[["apple","Apfel"],["house","Haus"],["dog","Hund"],["cat","Katze"],["water","Wasser"],
["book","Buch"],["school","Schule"],["car","Auto"],["tree","Baum"],["bread","Brot"],
["milk","Milch"],["sun","Sonne"],["moon","Mond"],["star","Stern"],["city","Stadt"],
["road","Stra√üe"],["street","Stra√üe"],["phone","Telefon"],["computer","Computer"],["chair","Stuhl"],
["table","Tisch"],["window","Fenster"],["door","T√ºr"],["flower","Blume"],["garden","Garten"],
["friend","Freund"],["family","Familie"],["love","Liebe"],["work","Arbeit"],["money","Geld"],
["time","Zeit"],["day","Tag"],["night","Nacht"],["food","Essen"],["drink","Getr√§nk"],
["animal","Tier"],["bird","Vogel"],["fish","Fisch"],["mountain","Berg"],["river","Fluss"],
["sea","Meer"],["rain","Regen"],["snow","Schnee"],["cold","Kalt"],["hot","Hei√ü"],
["happy","Gl√ºcklich"],["sad","Traurig"],["big","Gro√ü"],["small","Klein"],["fast","Schnell"]],
russisch:[["—è–±–ª–æ–∫–æ","Apfel"],["–¥–æ–º","Haus"],["—Å–æ–±–∞–∫–∞","Hund"],["–∫–æ—Ç","Katze"],["–≤–æ–¥–∞","Wasser"],
["–∫–Ω–∏–≥–∞","Buch"],["—à–∫–æ–ª–∞","Schule"],["–º–∞—à–∏–Ω–∞","Auto"],["–¥–µ—Ä–µ–≤–æ","Baum"],["—Ö–ª–µ–±","Brot"],
["–º–æ–ª–æ–∫–æ","Milch"],["—Å–æ–ª–Ω—Ü–µ","Sonne"],["–ª—É–Ω–∞","Mond"],["–∑–≤–µ–∑–¥–∞","Stern"],["–≥–æ—Ä–æ–¥","Stadt"],
["–¥–æ—Ä–æ–≥–∞","Stra√üe"],["—É–ª–∏—Ü–∞","Stra√üe"],["—Ç–µ–ª–µ—Ñ–æ–Ω","Telefon"],["–∫–æ–º–ø—å—é—Ç–µ—Ä","Computer"],["—Å—Ç—É–ª","Stuhl"],
["—Å—Ç–æ–ª","Tisch"],["–æ–∫–Ω–æ","Fenster"],["–¥–≤–µ—Ä—å","T√ºr"],["—Ü–≤–µ—Ç–æ–∫","Blume"],["—Å–∞–¥","Garten"],
["–¥—Ä—É–≥","Freund"],["—Å–µ–º—å—è","Familie"],["–ª—é–±–æ–≤—å","Liebe"],["—Ä–∞–±–æ—Ç–∞","Arbeit"],["–¥–µ–Ω—å–≥–∏","Geld"],
["–≤—Ä–µ–º—è","Zeit"],["–¥–µ–Ω—å","Tag"],["–Ω–æ—á—å","Nacht"],["–µ–¥–∞","Essen"],["–Ω–∞–ø–∏—Ç–æ–∫","Getr√§nk"],
["–∂–∏–≤–æ—Ç–Ω–æ–µ","Tier"],["–ø—Ç–∏—Ü–∞","Vogel"],["—Ä—ã–±–∞","Fisch"],["–≥–æ—Ä–∞","Berg"],["—Ä–µ–∫–∞","Fluss"],
["–º–æ—Ä–µ","Meer"],["–¥–æ–∂–¥—å","Regen"],["—Å–Ω–µ–≥","Schnee"],["—Ö–æ–ª–æ–¥–Ω–æ","Kalt"],["–∂–∞—Ä–∫–æ","Hei√ü"],
["—Å—á–∞—Å—Ç–ª–∏–≤—ã–π","Gl√ºcklich"],["–≥—Ä—É—Å—Ç–Ω—ã–π","Traurig"],["–±–æ–ª—å—à–æ–π","Gro√ü"],["–º–∞–ª–µ–Ω—å–∫–∏–π","Klein"],["–±—ã—Å—Ç—Ä—ã–π","Schnell"]],
kurdisch:[["s√™v","Apfel"],["mal","Haus"],["k√ª√ßik","Hund"],["pis√Æk","Katze"],["av","Wasser"],
["pirt√ªk","Buch"],["dibistan","Schule"],["ereb√™","Auto"],["dar","Baum"],["nan","Brot"],
["≈ü√Ær","Milch"],["roj","Sonne"],["heyv","Mond"],["st√™r","Stern"],["bajar","Stadt"],
["r√™","Stra√üe"],["kolan","Stra√üe"],["telefon","Telefon"],["komp√Æter","Computer"],["kurs√Æ","Stuhl"],
["masa","Tisch"],["pace","Fenster"],["der√Æ","T√ºr"],["gul","Blume"],["bax√ße","Garten"],
["heval","Freund"],["malbat","Familie"],["ev√Æn","Liebe"],["kar","Arbeit"],["dirav","Geld"],
["dem","Zeit"],["rojek","Tag"],["≈üev","Nacht"],["xwarin","Essen"],["vexwarin","Getr√§nk"],
["aj√Æ","Tier"],["bavik","Vogel"],["mas√Æ","Fisch"],["√ßiyay√™","Berg"],["√ßem","Fluss"],
["daryay√™","Meer"],["baran","Regen"],["berf","Schnee"],["sar","Kalt"],["germ","Hei√ü"],
["xo≈üewist√Æ","Gl√ºcklich"],["xemg√Æn","Traurig"],["mezin","Gro√ü"],["pi√ß√ªk","Klein"],["z√ª","Schnell"]]
};

// --- Screens ---
function hideAllScreens(){['usernameScreen','languageScreen','methodScreen','gameScreen','leaderboardScreen'].forEach(id=>document.getElementById(id).style.display='none');}
function showUsernameScreen(){hideAllScreens(); document.getElementById('usernameScreen').style.display='block';}
function showLanguageScreen(){hideAllScreens(); document.getElementById('languageScreen').style.display='block';}
function showMethodScreen(){hideAllScreens(); document.getElementById('methodScreen').style.display='block';}
function goToMethods(){showMethodScreen();}
function goToLanguage(){showLanguageScreen();}

// --- Punkte & R√§nge ---
function updatePointsAndRank(){
  document.getElementById('pointsDisplay').innerText=`Punkte: ${points}`;
  let currentRank=rankThresholds[0].name; let nextRankPoints=rankThresholds[1].points;
  for(let i=0;i<rankThresholds.length;i++){
    if(points>=rankThresholds[i].points) currentRank=rankThresholds[i].name;
    if(i<rankThresholds.length-1) nextRankPoints=rankThresholds[i+1].points;
  }
  document.getElementById('rankDisplay').innerText=`Rang: ${currentRank} (n√§chster Rang: ${nextRankPoints} Punkte)`;
}

// --- Leaderboard ---
function showLeaderboard(){
  hideAllScreens(); document.getElementById('leaderboardScreen').style.display='block';
  let leaderboard=JSON.parse(localStorage.getItem('triolingoLeaderboard')||'[]');
  leaderboard.push({username,points});
  leaderboard.sort((a,b)=>b.points-a.points);
  if(leaderboard.length>10) leaderboard=leaderboard.slice(0,10);
  localStorage.setItem('triolingoLeaderboard',JSON.stringify(leaderboard));
  const list=document.getElementById('leaderboardList'); list.innerHTML='';
  leaderboard.forEach(player=>{const li=document.createElement('li'); li.innerText=`${player.username}: ${player.points} Punkte`; list.appendChild(li);});
}

// --- Username & Language ---
function setUsername(){
  const input=document.getElementById('usernameInput').value.trim();
  if(input){username=input; points=0; showLanguageScreen(); updatePointsAndRank();}
  else alert('Bitte Benutzernamen eingeben');
}
function selectLanguage(lang){language=lang; showMethodScreen();}

// --- Lernmethoden ---
function startGame(selectedMethod){
  method=selectedMethod; hideAllScreens(); document.getElementById('gameScreen').style.display='block';
  document.getElementById('methodTitle').innerText=method==='memory'?'Memory-Spiel':method==='flashcards'?'Karteikarten':'W√∂rter lernen';
  if(method==='memory') setupMemory();
  else if(method==='flashcards') setupFlashcards();
  else setupNormalLearning();
}

// --- Memory (20 W√∂rter + 100 Punkte pro Runde) ---
let firstCard=null, secondCard=null, lockBoard=false;
let matchedPairs=0, totalPairs=0;
function setupMemory(){
  const board=document.getElementById('gameBoard'); 
  board.innerHTML='';
  matchedPairs = 0;

  let selectedWords=[...words[language]].sort(()=>0.5-Math.random()).slice(0,20);
  totalPairs = selectedWords.length;

  let cards=[]; 
  selectedWords.forEach(pair=>{cards.push(pair[0]); cards.push(pair[1]);});
  cards.sort(()=>0.5-Math.random());

  cards.forEach(word=>{
    const card=document.createElement('div'); 
    card.classList.add('card'); 
    card.dataset.word=word; 
    card.innerText='?'; 
    card.onclick=flipCard; 
    board.appendChild(card);
  });
}

function flipCard(){
  if(lockBoard||this===firstCard) return; 
  this.classList.add('flipped'); 
  this.innerText=this.dataset.word;

  if(!firstCard){firstCard=this; return;} 
  secondCard=this; 
  checkMatch();
}

function checkMatch(){
  let isMatch=false; 
  words[language].forEach(pair=>{
    if((pair[0]===firstCard.dataset.word && pair[1]===secondCard.dataset.word) ||
       (pair[1]===firstCard.dataset.word && pair[0]===secondCard.dataset.word)) isMatch=true;
  });

  if(isMatch){
    matchedPairs++;
    firstCard.removeEventListener('click',flipCard);
    secondCard.removeEventListener('click',flipCard);
    resetMemory();

    if(matchedPairs === totalPairs){
      points += 100;
      alert(`Memory abgeschlossen! +100 Punkte`);
      updatePointsAndRank();
      setupMemory(); // neue Runde starten
    }

  } else{
    lockBoard=true; 
    setTimeout(()=>{
      firstCard.classList.remove('flipped'); 
      secondCard.classList.remove('flipped'); 
      firstCard.innerText='?'; 
      secondCard.innerText='?'; 
      resetMemory();
    },800);
  }
}

function resetMemory(){[firstCard,secondCard]=[null,null]; lockBoard=false;}

// --- Flashcards ---
function setupFlashcards(){
  const board=document.getElementById('gameBoard'); board.innerHTML='';
  const pair=words[language][Math.floor(Math.random()*words[language].length)];
  const card=document.createElement('div'); card.classList.add('flashcard'); card.innerText=pair[0]; card.onclick=()=>{card.innerText=pair[1];}; board.appendChild(card);
  const nextBtn=document.createElement('button'); nextBtn.innerText='Richtig'; nextBtn.onclick=()=>{points+=10; alert(`Richtig! +10 Punkte`); updatePointsAndRank(); setupFlashcards();}; board.appendChild(nextBtn);
}

// --- Normal Learning mit 4 Antwortm√∂glichkeiten ---
function setupNormalLearning(){
  const pair = words[language][Math.floor(Math.random()*words[language].length)]; 
  const board = document.getElementById('gameBoard'); 
  board.innerHTML = '';
  
  const wordDiv = document.createElement('div'); 
  wordDiv.innerText = pair[0]; 
  wordDiv.style.fontSize = '24px'; 
  board.appendChild(wordDiv);

  let options = [pair[1]]; 
  while(options.length < 4){
    let randPair = words[language][Math.floor(Math.random()*words[language].length)];
    if(!options.includes(randPair[1])) options.push(randPair[1]);
  }
  options.sort(()=>0.5 - Math.random());

  options.forEach(opt=>{
    const btn = document.createElement('button'); 
    btn.innerText = opt;
    btn.onclick = ()=>{
      if(opt === pair[1]){
        points += 15;
        alert(`Richtig! +15 Punkte`);
      } else {
        alert(`Falsch! +0 Punkte`);
      }
      updatePointsAndRank();
      setupNormalLearning(); 
    };
    board.appendChild(btn);
  });
}

// --- Start ---
showUsernameScreen();
</script>

</body>
</html>
