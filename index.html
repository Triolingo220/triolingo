<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<title>Triolingo</title>
<style>
body{
  margin:0;
  font-family:Arial;
  background:linear-gradient(135deg,#1e3c72,#2a5298);
  color:white;
  text-align:center;
}
header{
  padding:20px;
  background:rgba(255,255,255,0.15);
  backdrop-filter:blur(10px);
  display:flex;
  justify-content:space-between;
  align-items:center;
}
h1{margin:0;}
button{
  font-size:20px;
  padding:18px 35px;
  margin:12px;
  border-radius:15px;
  border:none;
  cursor:pointer;
  background:rgba(255,255,255,0.15);
  color:white;
  min-width:220px;
}
button:hover{background:rgba(255,255,255,0.3);}
.screen{display:none;margin-top:40px;}
.correct{background:green !important;}
.wrong{background:red !important;}
#gameBoard{
  display:grid;
  grid-template-columns:repeat(4,230px);
  gap:20px;
  justify-content:center;
  margin-top:30px;
}
.progressBar{
  width:60%;
  margin:15px auto;
  height:25px;
  background:rgba(255,255,255,0.2);
  border-radius:20px;
}
.progress{
  height:100%;
  background:limegreen;
  border-radius:20px;
  width:0%;
}
.hidden{display:none;}
</style>
</head>
<body>

<header>
<h1>üåç Triolingo 4.0</h1>
<div id="headerButtons" class="hidden">
<button onclick="showLanguage()">Sprache</button>
<button onclick="showMethods()">Methoden</button>
<button onclick="showProfile()">Profil</button>
<button onclick="showLeaderboard()">Rangliste</button>
<button onclick="logout()">Logout</button>
</div>
</header>

<div id="xpDisplay"></div>
<div class="progressBar"><div class="progress" id="xpBar"></div></div>

<!-- LOGIN -->
<div id="loginScreen" class="screen">
<h2>Login / Registrierung</h2>
<input id="username" placeholder="Benutzername"><br><br>
<input type="password" id="password" placeholder="Passwort"><br><br>
<button onclick="login()">Anmelden</button>
<button onclick="register()">Registrieren</button>
</div>

<!-- LANGUAGE -->
<div id="languageScreen" class="screen">
<h2>Sprache w√§hlen</h2>
<button onclick="selectLanguage('englisch')">Englisch</button>
<button onclick="selectLanguage('russisch')">Russisch</button>
<button onclick="selectLanguage('kurdisch')">Kurdisch</button>
</div>

<!-- METHODS -->
<div id="methodScreen" class="screen">
<h2>Lernmethode</h2>
<button onclick="startNormal()">W√∂rter lernen</button>
<button onclick="startWrong()">Falsche W√∂rter</button>
<button onclick="memoryMenu()">Memory</button>
</div>

<!-- GAME -->
<div id="gameScreen" class="screen">
<h2 id="gameTitle"></h2>
<div id="gameBoard"></div>
<br>
<button id="nextBtn" onclick="nextWord()" style="display:none;">Weiter</button>
</div>

<!-- LEADERBOARD -->
<div id="leaderboardScreen" class="screen">
<h2>üèÜ Top 10</h2>
<ol id="leaderboardList"></ol>
</div>

<!-- PROFILE -->
<div id="profileScreen" class="screen">
<h2>Profil</h2>
<p id="profileXP"></p>
<p id="profileLevel"></p>
<p id="profileNextRank"></p>
<button onclick="showMethods()">Zur√ºck</button>
</div>

<script>
const correctSound=new Audio("https://actions.google.com/sounds/v1/cartoon/clang_and_wobble.ogg");
const wrongSound=new Audio("https://actions.google.com/sounds/v1/cartoon/wood_plank_flicks.ogg");

let currentUser=null;
let language="";
let xp=0;
let level=1;
let wrongWords=[];
let memoryUnlocked=1;
let currentWord=null;
const rankThresholds=[
  {name:'Anf√§nger',points:0},
  {name:'Fortgeschritten',points:100},
  {name:'Meister',points:500}
];

function getUsers(){return JSON.parse(localStorage.getItem("users")||"{}");}
function saveUsers(u){localStorage.setItem("users",JSON.stringify(u));}

function register(){
let u=username.value.trim();
let p=password.value;
let users=getUsers();
if(users[u]){alert("Benutzer existiert");return;}
users[u]={password:p,xp:0,level:1,wrong:[],memory:1};
saveUsers(users);
alert("Registriert!");
}

function login(){
let u=username.value.trim();
let p=password.value;
let users=getUsers();
if(users[u] && users[u].password===p){
currentUser=u;
xp=users[u].xp;
level=users[u].level;
wrongWords=users[u].wrong||[];
memoryUnlocked=users[u].memory||1;
updateXP();
document.getElementById("headerButtons").classList.remove("hidden");
show("languageScreen");
}else alert("Login falsch");
}

function logout(){
currentUser=null;
document.getElementById("headerButtons").classList.add("hidden");
show("loginScreen");
}

function xpNeeded(){return level*100;}
function addXP(amount){
xp+=amount;
while(xp>=xpNeeded()){
xp-=xpNeeded();
level++;
alert("Level Up! Jetzt Level "+level);
}
updateXP();
}
function updateXP(){
xpDisplay.innerText="Level "+level+" | Punkte: "+xp+"/"+xpNeeded();
xpBar.style.width=(xp/xpNeeded()*100)+"%";
let users=getUsers();
if(currentUser){
users[currentUser].xp=xp;
users[currentUser].level=level;
users[currentUser].wrong=wrongWords;
users[currentUser].memory=memoryUnlocked;
saveUsers(users);
}
}

/* ---------- UI ---------- */
function show(id){
document.querySelectorAll(".screen").forEach(s=>s.style.display="none");
document.getElementById(id).style.display="block";
}
function showLanguage(){show("languageScreen");}
function showMethods(){show("methodScreen");}
function showProfile(){
show("profileScreen");
document.getElementById("profileXP").innerText="Punkte: "+xp;
document.getElementById("profileLevel").innerText="Level: "+level;
let nextRank=rankThresholds.find(r=>r.points>xp);
document.getElementById("profileNextRank").innerText="N√§chster Rang: "+(nextRank?nextRank.name+" in "+(nextRank.points-xp)+" Punkten":"Max");
}
function selectLanguage(l){language=l;showMethods();}

/* ---------- WORDS ---------- */
const words = {
englisch:[["apple","Apfel"],["house","Haus"],["dog","Hund"],["cat","Katze"],["water","Wasser"],
["book","Buch"],["school","Schule"],["car","Auto"],["tree","Baum"],["bread","Brot"],
["milk","Milch"],["sun","Sonne"],["moon","Mond"],["star","Stern"],["city","Stadt"],
["street","Stra√üe"],["phone","Telefon"],["computer","Computer"],["chair","Stuhl"],["table","Tisch"],
["window","Fenster"],["door","T√ºr"],["flower","Blume"],["garden","Garten"],["friend","Freund"],
["family","Familie"],["love","Liebe"],["work","Arbeit"],["money","Geld"],["time","Zeit"],
["day","Tag"],["night","Nacht"],["food","Essen"],["drink","Getr√§nk"],["animal","Tier"],
["bird","Vogel"],["fish","Fisch"],["mountain","Berg"],["river","Fluss"],["sea","Meer"],
["rain","Regen"],["snow","Schnee"],["cold","Kalt"],["hot","Hei√ü"],["happy","Gl√ºcklich"],
["sad","Traurig"],["big","Gro√ü"],["small","Klein"],["fast","Schnell"],["slow","Langsam"],
["light","Licht"],["dark","Dunkel"],["morning","Morgen"],["evening","Abend"],["breakfast","Fr√ºhst√ºck"],
["lunch","Mittagessen"],["dinner","Abendessen"],["cheese","K√§se"],["egg","Ei"],["meat","Fleisch"],
["coffee","Kaffee"],["tea","Tee"],["sugar","Zucker"],["salt","Salz"],["pepper","Pfeffer"],
["knife","Messer"],["fork","Gabel"],["spoon","L√∂ffel"],["plate","Teller"],["cup","Tasse"],
["glass","Glas"],["bag","Tasche"],["shirt","Hemd"],["pants","Hose"],["shoe","Schuh"],
["jacket","Jacke"],["hat","Hut"],["watch","Uhr"],["ring","Ring"],["bed","Bett"],
["pillow","Kissen"],["blanket","Decke"],["bathroom","Badezimmer"],["kitchen","K√ºche"],["floor","Boden"],
["wall","Wand"],["roof","Dach"],["key","Schl√ºssel"],["lock","Schloss"],["bus","Bus"],
["train","Zug"],["plane","Flugzeug"],["ticket","Ticket"],["station","Bahnhof"],["airport","Flughafen"],
["doctor","Arzt"],["nurse","Krankenschwester"],["hospital","Krankenhaus"],["medicine","Medizin"],["pain","Schmerz"],
["teacher","Lehrer"],["student","Sch√ºler"],["lesson","Unterricht"],["homework","Hausaufgabe"],["exam","Pr√ºfung"],
["game","Spiel"],["ball","Ball"],["team","Team"],["player","Spieler"],["goal","Tor"],
["music","Musik"],["song","Lied"],["movie","Film"],["picture","Bild"],["camera","Kamera"],
["news","Nachrichten"],["paper","Zeitung"],["radio","Radio"],["television","Fernsehen"],["internet","Internet"],
["website","Webseite"],["password","Passwort"],["username","Benutzername"],["button","Knopf"],["screen","Bildschirm"],
["mouse","Maus"],["keyboard","Tastatur"],["file","Datei"],["folder","Ordner"],["download","Download"],
["upload","Upload"],["message","Nachricht"],["chat","Chat"],["call","Anruf"],["voice","Stimme"],
["language","Sprache"],["word","Wort"],["sentence","Satz"],["question","Frage"],["answer","Antwort"],
["idea","Idee"],["plan","Plan"],["problem","Problem"],["solution","L√∂sung"],["job","Job"],
["boss","Chef"],["office","B√ºro"],["meeting","Treffen"],["project","Projekt"],["goal","Ziel"],
["holiday","Urlaub"],["travel","Reise"],["hotel","Hotel"],["map","Karte"],["country","Land"],
["culture","Kultur"],["history","Geschichte"],["future","Zukunft"],["past","Vergangenheit"],["present","Gegenwart"],
["weather","Wetter"],["wind","Wind"],["storm","Sturm"],["cloud","Wolke"],["sky","Himmel"],
["earth","Erde"],["fire","Feuer"],["air","Luft"],["energy","Energie"],["power","Kraft"],
["health","Gesundheit"],["sport","Sport"],["training","Training"],["running","Laufen"],["walking","Gehen"],
["swimming","Schwimmen"],["cycling","Radfahren"],["fitness","Fitness"],["strength","St√§rke"],["rest","Ruhe"],
["tool","Werkzeug"],["paint","Farbe"],["doorbell","Klingel"],["lamp","Lampe"],["chair","Sessel"],
["notebook","Notizbuch"],["phone","Handy"],["wallet","Geldb√∂rse"],["key","Schl√ºssel"],["flower","Blume"],
["tree","Baum"],["river","Fluss"],["mountain","Berg"],["lake","See"],["forest","Wald"],["grass","Gras"],
["beach","Strand"],["sand","Sand"],["shell","Muschel"],["stone","Stein"],["road","Weg"],["bridge","Br√ºcke"],
["city","Stadt"],["village","Dorf"],["house","Haus"],["dog","Hund"],["cat","Katze"],["bird","Vogel"],
["fish","Fisch"],["milk","Milch"],["bread","Brot"],["cheese","K√§se"],["egg","Ei"],["meat","Fleisch"],
["coffee","Kaffee"],["tea","Tee"],["water","Wasser"],["soup","Suppe"],["cake","Kuchen"],["pie","Torte"],
["juice","Saft"],["soda","Limonade"],["ice","Eis"],["snow","Schnee"],["rain","Regen"],["sun","Sonne"],
["moon","Mond"],["star","Stern"],["light","Licht"],["dark","Dunkel"],["morning","Morgen"],["evening","Abend"],
["breakfast","Fr√ºhst√ºck"],["lunch","Mittagessen"],["dinner","Abendessen"],["fruit","Obst"],["vegetable","Gem√ºse"],
["meat3","Fleisch3"],["fish3","Fisch3"],["bird3","Vogel3"],["tree3","Baum3"],["flower3","Blume3"],["garden","Garten"],
["home","Zuhause"],["school","Schule"],["job","Beruf"],["work","Arbeit"],["friend","Freund"],["family","Familie"]
],
russisch:[["—è–±–ª–æ–∫–æ","Apfel"],["–¥–æ–º","Haus"],["—Å–æ–±–∞–∫–∞","Hund"],["–∫–æ—Ç","Katze"],["–≤–æ–¥–∞","Wasser"],
["–∫–Ω–∏–≥–∞","Buch"],["—à–∫–æ–ª–∞","Schule"],["–º–∞—à–∏–Ω–∞","Auto"],["–¥–µ—Ä–µ–≤–æ","Baum"],["—Ö–ª–µ–±","Brot"],
["–º–æ–ª–æ–∫–æ","Milch"],["—Å–æ–ª–Ω—Ü–µ","Sonne"],["–ª—É–Ω–∞","Mond"],["–∑–≤–µ–∑–¥–∞","Stern"],["–≥–æ—Ä–æ–¥","Stadt"],
["—É–ª–∏—Ü–∞","Stra√üe"],["—Ç–µ–ª–µ—Ñ–æ–Ω","Telefon"],["–∫–æ–º–ø—å—é—Ç–µ—Ä","Computer"],["—Å—Ç—É–ª","Stuhl"],["—Å—Ç–æ–ª","Tisch"],
["–æ–∫–Ω–æ","Fenster"],["–¥–≤–µ—Ä—å","T√ºr"],["—Ü–≤–µ—Ç–æ–∫","Blume"],["—Å–∞–¥","Garten"],["–¥—Ä—É–≥","Freund"],
["—Å–µ–º—å—è","Familie"],["–ª—é–±–æ–≤—å","Liebe"],["—Ä–∞–±–æ—Ç–∞","Arbeit"],["–¥–µ–Ω—å–≥–∏","Geld"],["–≤—Ä–µ–º—è","Zeit"],
["–¥–µ–Ω—å","Tag"],["–Ω–æ—á—å","Nacht"],["–µ–¥–∞","Essen"],["–Ω–∞–ø–∏—Ç–æ–∫","Getr√§nk"],["–∂–∏–≤–æ—Ç–Ω–æ–µ","Tier"],
["–ø—Ç–∏—Ü–∞","Vogel"],["—Ä—ã–±–∞","Fisch"],["–≥–æ—Ä–∞","Berg"],["—Ä–µ–∫–∞","Fluss"],["–º–æ—Ä–µ","Meer"],
["–¥–æ–∂–¥—å","Regen"],["—Å–Ω–µ–≥","Schnee"],["—Ö–æ–ª–æ–¥","K√§lte"],["–∂–∞—Ä–∞","Hitze"],["—Å—á–∞—Å—Ç—å–µ","Gl√ºck"],
["–≥—Ä—É—Å—Ç—å","Trauer"],["–±–æ–ª—å—à–æ–π","Gro√ü"],["–º–∞–ª–µ–Ω—å–∫–∏–π","Klein"],["–±—ã—Å—Ç—Ä—ã–π","Schnell"],["–º–µ–¥–ª–µ–Ω–Ω—ã–π","Langsam"],
["—Å–≤–µ—Ç","Licht"],["—Ç–µ–º–Ω–æ—Ç–∞","Dunkelheit"],["—É—Ç—Ä–æ","Morgen"],["–≤–µ—á–µ—Ä","Abend"],["–∑–∞–≤—Ç—Ä–∞–∫","Fr√ºhst√ºck"],
["–æ–±–µ–¥","Mittagessen"],["—É–∂–∏–Ω","Abendessen"],["—Å—ã—Ä","K√§se"],["—è–π—Ü–æ","Ei"],["–º—è—Å–æ","Fleisch"],
["–∫–æ—Ñ–µ","Kaffee"],["—á–∞–π","Tee"],["—Å–∞—Ö–∞—Ä","Zucker"],["—Å–æ–ª—å","Salz"],["–ø–µ—Ä–µ—Ü","Pfeffer"],
["–Ω–æ–∂","Messer"],["–≤–∏–ª–∫–∞","Gabel"],["–ª–æ–∂–∫–∞","L√∂ffel"],["—Ç–∞—Ä–µ–ª–∫–∞","Teller"],["—á–∞—à–∫–∞","Tasse"],
["—Å—Ç–∞–∫–∞–Ω","Glas"],["—Å—É–º–∫–∞","Tasche"],["—Ä—É–±–∞—à–∫–∞","Hemd"],["—à—Ç–∞–Ω—ã","Hose"],["–æ–±—É–≤—å","Schuh"],
["–∫—É—Ä—Ç–∫–∞","Jacke"],["—à–∞–ø–∫–∞","Hut"],["—á–∞—Å—ã","Uhr"],["–∫–æ–ª—å—Ü–æ","Ring"],["–∫—Ä–æ–≤–∞—Ç—å","Bett"],
["–ø–æ–¥—É—à–∫–∞","Kissen"],["–æ–¥–µ—è–ª–æ","Decke"],["–≤–∞–Ω–Ω–∞—è","Badezimmer"],["–∫—É—Ö–Ω—è","K√ºche"],["–ø–æ–ª","Boden"],
["—Å—Ç–µ–Ω–∞","Wand"],["–∫—Ä—ã—à–∞","Dach"],["–∫–ª—é—á","Schl√ºssel"],["–∑–∞–º–æ–∫","Schloss"],["–∞–≤—Ç–æ–±—É—Å","Bus"],
["–ø–æ–µ–∑–¥","Zug"],["—Å–∞–º–æ–ª–µ—Ç","Flugzeug"],["–±–∏–ª–µ—Ç","Ticket"],["—Å—Ç–∞–Ω—Ü–∏—è","Bahnhof"],["–∞—ç—Ä–æ–ø–æ—Ä—Ç","Flughafen"],
["–≤—Ä–∞—á","Arzt"],["–º–µ–¥—Å–µ—Å—Ç—Ä–∞","Krankenschwester"],["–±–æ–ª—å–Ω–∏—Ü–∞","Krankenhaus"],["–ª–µ–∫–∞—Ä—Å—Ç–≤–æ","Medizin"],["–±–æ–ª—å","Schmerz"],
["—É—á–∏—Ç–µ–ª—å","Lehrer"],["—É—á–µ–Ω–∏–∫","Sch√ºler"],["—É—Ä–æ–∫","Unterricht"],["–¥–æ–º–∞—à–Ω–µ–µ –∑–∞–¥–∞–Ω–∏–µ","Hausaufgabe"],["—ç–∫–∑–∞–º–µ–Ω","Pr√ºfung"],
["–∏–≥—Ä–∞","Spiel"],["–º—è—á","Ball"],["–∫–æ–º–∞–Ω–¥–∞","Team"],["–∏–≥—Ä–æ–∫","Spieler"],["–≥–æ–ª","Tor"],
["–º—É–∑—ã–∫–∞","Musik"],["–ø–µ—Å–Ω—è","Lied"],["—Ñ–∏–ª—å–º","Film"],["–∫–∞—Ä—Ç–∏–Ω–∞","Bild"],["–∫–∞–º–µ—Ä–∞","Kamera"],
["–Ω–æ–≤–æ—Å—Ç–∏","Nachrichten"],["–≥–∞–∑–µ—Ç–∞","Zeitung"],["—Ä–∞–¥–∏–æ","Radio"],["—Ç–µ–ª–µ–≤–∏–¥–µ–Ω–∏–µ","Fernsehen"],["–∏–Ω—Ç–µ—Ä–Ω–µ—Ç","Internet"],
["—Å–∞–π—Ç","Webseite"],["–ø–∞—Ä–æ–ª—å","Passwort"],["–∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è","Benutzername"],["–∫–Ω–æ–ø–∫–∞","Knopf"],["—ç–∫—Ä–∞–Ω","Bildschirm"],
["–º—ã—à—å","Maus"],["–∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞","Tastatur"],["—Ñ–∞–π–ª","Datei"],["–ø–∞–ø–∫–∞","Ordner"],["–∑–∞–≥—Ä—É–∑–∫–∞","Download"],
["—Å–æ–æ–±—â–µ–Ω–∏–µ","Nachricht"],["—á–∞—Ç","Chat"],["–∑–≤–æ–Ω–æ–∫","Anruf"],["–≥–æ–ª–æ—Å","Stimme"],["—è–∑—ã–∫","Sprache"],
["—Å–ª–æ–≤–æ","Wort"],["–ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ","Satz"],["–≤–æ–ø—Ä–æ—Å","Frage"],["–æ—Ç–≤–µ—Ç","Antwort"],["–∏–¥–µ—è","Idee"],
["–ø–ª–∞–Ω","Plan"],["–ø—Ä–æ–±–ª–µ–º–∞","Problem"],["—Ä–µ—à–µ–Ω–∏–µ","L√∂sung"],["–æ—Ñ–∏—Å","B√ºro"],["–≤—Å—Ç—Ä–µ—á–∞","Treffen"],
["–ø—Ä–æ–µ–∫—Ç","Projekt"],["—Ü–µ–ª—å","Ziel"],["–æ—Ç–ø—É—Å–∫","Urlaub"],["–ø—É—Ç–µ—à–µ—Å—Ç–≤–∏–µ","Reise"],["–æ—Ç–µ–ª—å","Hotel"],
["–∫–∞—Ä—Ç–∞","Karte"],["—Å—Ç—Ä–∞–Ω–∞","Land"],["–∫—É–ª—å—Ç—É—Ä–∞","Kultur"],["–∏—Å—Ç–æ—Ä–∏—è","Geschichte"],["–±—É–¥—É—â–µ–µ","Zukunft"],
["–ø—Ä–æ—à–ª–æ–µ","Vergangenheit"],["–Ω–∞—Å—Ç–æ—è—â–µ–µ","Gegenwart"],["–ø–æ–≥–æ–¥–∞","Wetter"],["–≤–µ—Ç–µ—Ä","Wind"],["–±—É—Ä—è","Sturm"],
["–æ–±–ª–∞–∫–æ","Wolke"],["–Ω–µ–±–æ","Himmel"],["–∑–µ–º–ª—è","Erde"],["–æ–≥–æ–Ω—å"]]
};

// ---------- NORMAL LEARNING ----------
function startNormal(){
if(!language){alert("Sprache w√§hlen!");return;}
show("gameScreen");
gameTitle.innerText="W√∂rter lernen";
nextBtn.style.display="none";
loadWord(words[language]);
}

function loadWord(arr){

if(!arr || arr.length===0){
alert("Keine W√∂rter verf√ºgbar.");
showMethods();
return;
}

gameBoard.innerHTML="";
currentWord=arr[Math.floor(Math.random()*arr.length)];

let q=document.createElement("h2");
q.innerText=currentWord[0];
gameBoard.appendChild(q);

let options=[currentWord[1]];

while(options.length<4){
let r=arr[Math.floor(Math.random()*arr.length)][1];
if(!options.includes(r)) options.push(r);
}

options.sort(()=>0.5-Math.random());

options.forEach(opt=>{
let btn=document.createElement("button");
btn.innerText=opt;

btn.onclick=function(){

if(opt===currentWord[1]){

btn.classList.add("correct");
correctSound.play();
addXP(20);

// ‚úÖ Richtig ‚Üí aus falschen entfernen
wrongWords = wrongWords.filter(w => w[0] !== currentWord[0]);

}else{

btn.classList.add("wrong");
wrongSound.play();
alert("Richtig: "+currentWord[1]);

// ‚úÖ Falsch ‚Üí sauber hinzuf√ºgen
if(!wrongWords.some(w => w[0] === currentWord[0])){
wrongWords.push([...currentWord]);
}

}

nextBtn.style.display="inline-block";
};

gameBoard.appendChild(btn);
});

}


function nextWord(){nextBtn.style.display="none"; loadWord(words[language]);}

function startWrong(){
if(wrongWords.length===0){alert("Keine falschen W√∂rter");return;}
show("gameScreen");
gameTitle.innerText="Falsche W√∂rter";
nextBtn.style.display="none";
loadWord(wrongWords);
}

// ---------- MEMORY ----------
function memoryMenu(){
show("gameScreen");
gameTitle.innerText="Memory Level w√§hlen";
gameBoard.innerHTML="";
for(let i=1;i<=10;i++){
let btn=document.createElement("button");
btn.innerHTML=(i<=memoryUnlocked? "Level "+i : "üîí Level "+i);
btn.disabled=(i>memoryUnlocked);
btn.onclick=function(){startMemory(i);};
gameBoard.appendChild(btn);
}
}

let first=null,second=null,lock=false,found=0,total=0;
function startMemory(lvl){
show("gameScreen");
gameTitle.innerText="Memory Level "+lvl;
gameBoard.innerHTML="";
found=0;
let pairs=words[language].slice((lvl-1)*5,lvl*5);
total=pairs.length;
let cards=[];
pairs.forEach(p=>{cards.push(p[0]);cards.push(p[1]);});
cards.sort(()=>0.5-Math.random());
cards.forEach(word=>{
let btn=document.createElement("button");
btn.innerText="?";
btn.dataset.word=word;
btn.onclick=function(){
if(lock||btn.classList.contains("correct")) return;
btn.innerText=word;
if(!first){first=btn;return;}
second=btn;
checkMemory(lvl);
};
gameBoard.appendChild(btn);
});
}
function checkMemory(lvl){
lock=true;
let match=false;
words[language].forEach(p=>{
if((p[0]===first.dataset.word && p[1]===second.dataset.word)||(p[1]===first.dataset.word && p[0]===second.dataset.word))
match=true;
});
if(match){
first.classList.add("correct");
second.classList.add("correct");
found++;
if(found===total){
addXP(50);
alert("Level geschafft!");
if(lvl===memoryUnlocked) memoryUnlocked++;
memoryMenu();
}
resetMemory();
}else{
setTimeout(()=>{first.innerText="?"; second.innerText="?"; resetMemory();},800);
}
}
function resetMemory(){first=null;second=null;lock=false;}

// ---------- LEADERBOARD ----------
function showLeaderboard(){
show("leaderboardScreen");
let users=getUsers();
let arr=Object.keys(users).map(u=>({name:u,xp:users[u].level*100+users[u].xp}));
arr.sort((a,b)=>b.xp-a.xp);
leaderboardList.innerHTML="";
arr.slice(0,10).forEach((p,i)=>{
let li=document.createElement("li");
if(i===0) li.innerHTML="ü•á "+p.name+" - "+p.xp;
else if(i===1) li.innerHTML="ü•à "+p.name+" - "+p.xp;
else if(i===2) li.innerHTML="ü•â "+p.name+" - "+p.xp;
else li.innerText=p.name+" - "+p.xp;
leaderboardList.appendChild(li);
});
}

show("loginScreen");
</script>
</body>
</html>
